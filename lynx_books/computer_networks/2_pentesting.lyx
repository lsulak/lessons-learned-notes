#LyX 2.3 created this file. For more info see http://www.lyx.org/
\lyxformat 544
\begin_document
\begin_header
\save_transient_properties true
\origin unavailable
\textclass scrbook
\begin_preamble
% DO NOT ALTER THIS PREAMBLE!!!
%
% This preamble is designed to ensure that the manual prints
% out as advertised. If you mess with this preamble,
% parts of the manual may not print out as expected.  If you
% have problems LaTeXing this file, please contact 
% the documentation team
% email: lyx-docs@lists.lyx.org

% the pages of the TOC are numbered roman
% and a PDF-bookmark for the TOC is added

\pagenumbering{roman}
\let\myTOC\tableofcontents
\renewcommand{\tableofcontents}{%
 \pdfbookmark[1]{\contentsname}{}
 \myTOC

 \pagenumbering{arabic}}

% extra space for tables
\newcommand{\extratablespace}[1]{\noalign{\vskip#1}}
\end_preamble
\options bibliography=totoc,index=totoc,BCOR7.5mm,titlepage,captions=tableheading
\use_default_options false
\begin_modules
logicalmkup
theorems-ams
theorems-ams-extended
multicol
shapepar
\end_modules
\maintain_unincluded_children false
\language english
\language_package default
\inputencoding auto
\fontencoding global
\font_roman "lmodern" "default"
\font_sans "lmss" "default"
\font_typewriter "lmtt" "default"
\font_math "auto" "auto"
\font_default_family default
\use_non_tex_fonts false
\font_sc false
\font_osf false
\font_sf_scale 100 100
\font_tt_scale 100 100
\use_microtype false
\use_dash_ligatures true
\graphics default
\default_output_format default
\output_sync 0
\bibtex_command default
\index_command default
\paperfontsize 12
\spacing single
\use_hyperref true
\pdf_title "Pentesting Notes"
\pdf_author "Ladislav Sulak"
\pdf_bookmarks true
\pdf_bookmarksnumbered true
\pdf_bookmarksopen false
\pdf_bookmarksopenlevel 1
\pdf_breaklinks false
\pdf_pdfborder false
\pdf_colorlinks true
\pdf_backref false
\pdf_pdfusetitle false
\pdf_quoted_options "linkcolor=black, citecolor=black, urlcolor=blue, filecolor=blue, pdfpagelayout=OneColumn, pdfnewwindow=true, pdfstartview=XYZ, plainpages=false"
\papersize a4paper
\use_geometry true
\use_package amsmath 1
\use_package amssymb 1
\use_package cancel 1
\use_package esint 1
\use_package mathdots 1
\use_package mathtools 1
\use_package mhchem 1
\use_package stackrel 1
\use_package stmaryrd 1
\use_package undertilde 1
\cite_engine natbib
\cite_engine_type authoryear
\biblio_style plainnat
\use_bibtopic false
\use_indices false
\paperorientation portrait
\suppress_date false
\justification true
\use_refstyle 0
\use_minted 0
\notefontcolor #0000ff
\index Index
\shortcut idx
\color #008000
\end_index
\secnumdepth 1
\tocdepth 1
\paragraph_separation indent
\paragraph_indentation default
\is_math_indent 1
\math_indentation default
\math_numbering_side default
\quotes_style english
\dynamic_quotes 0
\papercolumns 1
\papersides 1
\paperpagestyle headings
\tracking_changes false
\output_changes false
\html_math_output 0
\html_css_as_file 0
\html_be_strict true
\end_header

\begin_body

\begin_layout Chapter
Pentesting Tools
\end_layout

\begin_layout Section
Eavesdropping
\end_layout

\begin_layout Itemize

\emph on
net2pcap
\end_layout

\begin_layout Itemize

\emph on
cdpsniffer
\end_layout

\begin_layout Itemize

\emph on
aimsniffer
\end_layout

\begin_layout Itemize

\emph on
vornst
\end_layout

\begin_layout Itemize

\emph on
tcptrace
\end_layout

\begin_layout Itemize

\emph on
tcptrack
\end_layout

\begin_layout Itemize

\emph on
nstreams
\end_layout

\begin_layout Itemize

\emph on
argus
\end_layout

\begin_layout Itemize

\emph on
karpski
\end_layout

\begin_layout Itemize

\emph on
ipgrab
\end_layout

\begin_layout Itemize

\emph on
nast
\end_layout

\begin_layout Itemize

\emph on
cdpr
\end_layout

\begin_layout Itemize

\emph on
aldebaran
\end_layout

\begin_layout Itemize

\emph on
dnsniff
\end_layout

\begin_layout Itemize

\emph on
apas
\end_layout

\begin_layout Itemize

\emph on
iptraf
\end_layout

\begin_layout Section
Packet Generation
\end_layout

\begin_layout Itemize

\emph on
scapy (the most common one)
\end_layout

\begin_layout Itemize

\emph on
packeth
\end_layout

\begin_layout Itemize

\emph on
packet
\end_layout

\begin_layout Itemize

\emph on
packet exkalibur
\end_layout

\begin_layout Itemize

\emph on
nemesis
\end_layout

\begin_layout Itemize

\emph on
libnet IPsorcery
\end_layout

\begin_layout Itemize

\emph on
pacgen
\end_layout

\begin_layout Itemize

\emph on
arp.sk
\end_layout

\begin_layout Itemize

\emph on
arpspoof
\end_layout

\begin_layout Itemize

\emph on
dnet
\end_layout

\begin_layout Itemize

\emph on
dpkt
\end_layout

\begin_layout Itemize

\emph on
iripas
\end_layout

\begin_layout Itemize

\emph on
sendIP
\end_layout

\begin_layout Itemize

\emph on
IP-packetgenerator
\end_layout

\begin_layout Itemize

\emph on
sing
\end_layout

\begin_layout Itemize

\emph on
libpal
\end_layout

\begin_layout Itemize

\emph on
aicmpsend
\end_layout

\begin_layout Section
Testing 
\end_layout

\begin_layout Itemize
ping
\end_layout

\begin_layout Itemize

\emph on
hping2
\end_layout

\begin_layout Itemize

\emph on
hping3
\end_layout

\begin_layout Itemize

\emph on
traceroute
\end_layout

\begin_layout Itemize

\emph on
mtr (! pinguje zistuje cestu a stabilitu a odozvu.
 V podstate ako traceroute, ale bezi stale a zistuje aj stratu paketov atd.)
\end_layout

\begin_layout Itemize

\emph on
tctrace
\end_layout

\begin_layout Itemize

\emph on
tcptraceroute
\end_layout

\begin_layout Itemize

\emph on
traceproto
\end_layout

\begin_layout Itemize

\emph on
tping
\end_layout

\begin_layout Itemize

\emph on
arping
\end_layout

\begin_layout Section
Scanning 
\end_layout

\begin_layout Itemize

\emph on
nmap
\end_layout

\begin_layout Itemize

\emph on
amap
\end_layout

\begin_layout Itemize

\emph on
vmap
\end_layout

\begin_layout Itemize

\emph on
hping3
\end_layout

\begin_layout Itemize

\emph on
unicomscan
\end_layout

\begin_layout Itemize

\emph on
ttlscan
\end_layout

\begin_layout Itemize

\emph on
paketto
\end_layout

\begin_layout Itemize

\emph on
firewalk
\end_layout

\begin_layout Section
Fingerprinting 
\end_layout

\begin_layout Itemize

\emph on
nmap
\end_layout

\begin_layout Itemize

\emph on
xprobe
\end_layout

\begin_layout Itemize

\emph on
p0f
\end_layout

\begin_layout Itemize

\emph on
cron-OS
\end_layout

\begin_layout Itemize

\emph on
queso
\end_layout

\begin_layout Itemize

\emph on
amap
\end_layout

\begin_layout Itemize

\emph on
syscan
\end_layout

\begin_layout Section
Attacks 
\end_layout

\begin_layout Itemize

\emph on
dnssproof
\end_layout

\begin_layout Itemize

\emph on
poison ivy
\end_layout

\begin_layout Itemize

\emph on
Macof
\end_layout

\begin_layout Itemize

\emph on
ikeprobe
\end_layout

\begin_layout Itemize

\emph on
ettercap
\end_layout

\begin_layout Itemize

\emph on
dnsniff suite
\end_layout

\begin_layout Itemize

\emph on
cain
\end_layout

\begin_layout Itemize

\emph on
hunt
\end_layout

\begin_layout Itemize

\emph on
airpwn
\end_layout

\begin_layout Itemize

\emph on
irpass
\end_layout

\begin_layout Itemize

\emph on
nast
\end_layout

\begin_layout Section
IDS / IPS
\end_layout

\begin_layout Itemize
Open-source:
\emph on
 Snort, Bro, Surricata 
\end_layout

\begin_layout Itemize
Enterprise: 
\emph on
Fortigate, Cyberoam, Watchguard 
\end_layout

\begin_layout Itemize
A simple IDS/IPS system that logs /var/log/auth.log - 
\emph on
Fail2ban
\end_layout

\begin_layout Section
Major firewall platforms 
\end_layout

\begin_layout Itemize

\emph on
Checkpoint
\end_layout

\begin_layout Itemize

\emph on
Juniper 
\end_layout

\begin_layout Itemize

\emph on
Cisco
\end_layout

\begin_layout Itemize

\emph on
Fortinet
\end_layout

\begin_layout Chapter
Network Attacks
\end_layout

\begin_layout Section
Communication in local IPv4 network
\end_layout

\begin_layout Itemize

\emph on
Access to a website
\end_layout

\begin_deeper
\begin_layout Enumerate
Pridelenie adresy pomocou DHCPv4 - 
\series bold
DHCP spoofing
\series default
 (typicky nie je nic podpisovane ani sifrovane) - poslem ako klient do sieti
 'DHCP discover' a kedze je to broadcast tak sa rozposle na vsetky prvky.
 Niektore spravu zahodia a DHCP server jediny vygeneruje 'DHCP offer' s5
 ku mne.
 Ja poslem nasledne 'DHCP request' (posle sa opat broadcastovo lebo moze
 existovat viac DHCP serverov).
 Server posle 'DHCP acknowledge' ze spravu potvrdzuje a klient si moze u
 seba nastavit IP adresu.
 Az potom si ju klient nastavi u seba.
 
\end_layout

\begin_layout Enumerate
ziskanie adresy MAC brany (
\series bold
CAM overflow
\series default
, alebo 
\series bold
utoky na ARP protokol
\series default
).
\end_layout

\begin_layout Enumerate
mapovanie domenoveho mena -> IP (pomocou DNS).
\end_layout

\begin_layout Enumerate
naviazanie spojenia pomocou TCP a nasledne HTTP request.
\end_layout

\end_deeper
\begin_layout Itemize

\emph on
DHCP Spoofing 
\end_layout

\begin_deeper
\begin_layout Itemize
Kedze sa sprava na zaciatku rozposle vsektym, aj utocnikovi.
 Jednym zo sposobov ako klientovi spravu podvrhnut, je ten, ze sa ju (DHCP
 offer) 
\series bold
skusim dorucit skor
\series default
 (zahltit ho aby bol pomalsi) 
\series bold
nez DHCP server
\series default
.
 Nasledne si nastavim informacie podla toho, co mi dal utocnik.
 Utocnik napriklad da vychodzu MAC branu na seba, ze je to on sam.
 Teda vsetok prenos klienta do internetu pojde cez neho.
\end_layout

\begin_layout Itemize

\series bold
Zneuzitie
\series default
 - ukradnutie IP adresy (ziskanie napr pristupovych prav niekde inde), presmerov
anie vychodzej brany, vlozenie vlastneho DNS serveru, falosny DHCP server
 - trojany.
\end_layout

\begin_layout Itemize

\series bold
Realizacia
\series default
 - ettercap for MITM.
\end_layout

\begin_layout Itemize

\series bold
Obrana
\series default
 - switch bude filtrovat tieto spravy, teda switch bude povolovat iba spravy
 z DHCP serveru.
 Monitovaci system (IDS/IPS).
 Switch bude mat povoleny port na DHCP offer iba od praveho DHCP serveru.
 Problem je ten, ze switch pracuje na L2 a aby sa dopracoval az do aplikacneho
 protokolu aby zistil ze sa jedna o DHCP offer stoji vykon.
 Mozeme skusit filtrovat pomocou IP adresy DHCP serveru napriklad.
\end_layout

\end_deeper
\begin_layout Itemize

\emph on
CAM Overflow
\emph default
 
\end_layout

\begin_deeper
\begin_layout Itemize
zaplnenie CAM tabulky - uklada info o porte, VLAN, MAC a stari zaznamu.
 Zaznamy z nej nemozu byt vytlacene.
 Utok funguje iba po dobu vyprsania zaznamu z tabulky a sila je iba na sniffing.
 Vysledkom je to, ze mozem ako utocnik odposluchavat provoz, ku ktoremu
 by som sa normalne nedostal.
\end_layout

\begin_layout Itemize

\series bold
Realizacia
\series default
 - Macof
\end_layout

\begin_layout Itemize

\series bold
Obrana
\series default
 - Port security - povolene iba predkonfigurovane MAC adresy, obmedzit pocet
 MAC adries na port.
 Dopad to ma taky, ze mame iba obmedzeny pocet zariadeni a tak istym sposobom
 limitujeme uzivatela.
 Casto je to implementovane v HW a nema to dopad na vykon.
\end_layout

\end_deeper
\begin_layout Itemize

\emph on
ARP Spoofing
\emph default
 
\end_layout

\begin_deeper
\begin_layout Itemize
Pokusim sa z pohladu utocnika preucit pocitace, aby isla komunikacia cezo
 mna (MitM zas).
 Na zaklade toho ze ku kazdej IP adrese je nejaka MAC adresa, otrava cache.
\end_layout

\begin_layout Itemize

\series bold
Obrana
\series default
 - Dynamic ARP Inspection - tvorba tabulky MAC-IP-Port, testovanie ARP paketov
 a povolenie iba spravnych.
 Switch aj tak spracovava tieto informacie (
\series bold
DHCP snooping
\series default
), no i tak to ma jednoznacne dopad moc vykon.
 Dalsi dopad - zamedzenie statickych IP adries, ak sa nejaka potrebna vazebni
 informacia nenachadza (DHCP binding), spravu zahodim.
 Okrem toho restart zariadenia znemozni klientom komunikaciu.
\end_layout

\end_deeper
\end_body
\end_document
